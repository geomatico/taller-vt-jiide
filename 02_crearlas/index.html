



<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>2. Cómo crearlas - Teselas Vectoriales en la IDE</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#creacion-y-almacenaje-de-teselas-vectoriales" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Teselas Vectoriales en la IDE" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Teselas Vectoriales en la IDE
              </span>
              <span class="md-header-nav__topic">
                2. Cómo crearlas
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/geomatico/taller-vt-jiide/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Teselas Vectoriales en la IDE" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Teselas Vectoriales en la IDE
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/geomatico/taller-vt-jiide/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../01_que_son/" title="1. Qué son" class="md-nav__link">
      1. Qué son
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        2. Cómo crearlas
      </label>
    
    <a href="./" title="2. Cómo crearlas" class="md-nav__link md-nav__link--active">
      2. Cómo crearlas
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#especificacion-mbtiles" title="Especificación .mbtiles" class="md-nav__link">
    Especificación .mbtiles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vista-tiles" title="Vista tiles" class="md-nav__link">
    Vista tiles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tabla-metadata" title="Tabla metadata" class="md-nav__link">
    Tabla metadata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tippecanoe" title="Tippecanoe" class="md-nav__link">
    Tippecanoe
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-practico-generacion-de-una-piramide-de-teselas-vectoriales" title="Caso práctico: generación de una pirámide de teselas vectoriales" class="md-nav__link">
    Caso práctico: generación de una pirámide de teselas vectoriales
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../03_servirlas/" title="3. Cómo servirlas" class="md-nav__link">
      3. Cómo servirlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../04_OGC/" title="4. Servicios estándar" class="md-nav__link">
      4. Servicios estándar
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../05_sprites_glyphs/" title="5. Iconos y tipografías" class="md-nav__link">
      5. Iconos y tipografías
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../06_estilos/" title="6. Cómo simbolizarlas" class="md-nav__link">
      6. Cómo simbolizarlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../07_visores/" title="7. Cómo visualizarlas" class="md-nav__link">
      7. Cómo visualizarlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../08_recursos/" title="8. Recursos" class="md-nav__link">
      8. Recursos
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#especificacion-mbtiles" title="Especificación .mbtiles" class="md-nav__link">
    Especificación .mbtiles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vista-tiles" title="Vista tiles" class="md-nav__link">
    Vista tiles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tabla-metadata" title="Tabla metadata" class="md-nav__link">
    Tabla metadata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tippecanoe" title="Tippecanoe" class="md-nav__link">
    Tippecanoe
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caso-practico-generacion-de-una-piramide-de-teselas-vectoriales" title="Caso práctico: generación de una pirámide de teselas vectoriales" class="md-nav__link">
    Caso práctico: generación de una pirámide de teselas vectoriales
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/geomatico/taller-vt-jiide/edit/master/docs/02_crearlas.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="creacion-y-almacenaje-de-teselas-vectoriales">Creación y almacenaje de teselas vectoriales</h1>
<p>Generar las teselas vectoriales al vuelo es lento, y se recomienda, en la medida de lo posible, tenerlas cacheadas.</p>
<p>Almacenar una pirámide de teselas en una estructura de directorios, cuando se tiene una cantidad importante de datos, es
también ineficiente, por lo que Mapbox creó el foramto mbtiles.</p>
<h2 id="especificacion-mbtiles">Especificación <em><code>.mbtiles</code></em></h2>
<p>Mbtiles contiene toda una pirámide de teselas en un solo fichero, que es una BDD sqlite.</p>
<p>Pirámide de teselas guardada en una BDD SQLite, con un esquema determinado. Tablas principales:</p>
<h3 id="vista-tiles">Vista <code>tiles</code></h3>
<table>
<thead>
<tr>
<th>zoom_level</th>
<th>tile_column</th>
<th>tile_row</th>
<th>tile_data</th>
</tr>
</thead>
<tbody>
<tr>
<td>{z}</td>
<td>{x}</td>
<td>{y}</td>
<td>{BLOB}</td>
</tr>
</tbody>
</table>
<h3 id="tabla-metadata">Tabla <code>metadata</code></h3>
<table>
<thead>
<tr>
<th>name</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>format</code></td>
<td>"<em>pbf</em>"</td>
</tr>
<tr>
<td><code>attribution</code></td>
<td>"(c) OpenStreetMap..."</td>
</tr>
<tr>
<td><code>minZoom</code></td>
<td>0</td>
</tr>
<tr>
<td><code>maxZoom</code></td>
<td>14</td>
</tr>
<tr>
<td><code>BBOX</code></td>
<td>-180,-85.06,180,85.06</td>
</tr>
<tr>
<td><code>json</code></td>
<td>(capas contenidas en cada tesela, y su "feature type")</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Un fichero mbtiles puede contener teselas de cualquier tipo, también de formato imagen. Esto no se deduce de la extensión del fichero.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Mbtiles no es equivalente a geopackage. Aunque ambos son esencialmente una BDD SQLite, guardan los datos en una estructura distinta y tienen diferente propósito.</p>
</div>
<h2 id="tippecanoe">Tippecanoe</h2>
<p><a href="https://github.com/mapbox/tippecanoe">Tippecanoe</a> es la herramienta que permite crear teselas vectoriales de
grandes colecciones de elementos en formato GeoJSON.</p>
<p>El objetivo de Tippecanoe es permitir una visión de sus datos independiente de la escala, de modo que en cualquier
nivel, desde el mundo entero hasta un solo edificio, se pueda apreciar la densidad y la textura de los datos, en
lugar de una simplificación geométrica, que puede eliminar vértices importantes que cambien la apariencia de los datos
en su versión simplificada.</p>
<p>Algunos ejemplos:</p>
<ul>
<li>Teniendo todo el callejero de OpenStreetMap, la vista general devolverá algo que se parece a
"Todas las calles" en lugar de algo que parece un atlas de carreteras interestatal.</li>
<li>Teniendo todas las plantas de edificios de una ciudad, en la vista general donde los edificios individuales ya no
sean perceptibles, aún deberías poder ver la extensión y variedad del desarrollo en cada vecindario,
no solo para los edificios más voluminosos.</li>
</ul>
<p>Esto hace que la calidad de los resultados de Tippecanoe sea muy superior a otras alternativas, que utilizan algoritmos
de simplificación más convencionales, motivo por el cual lo recomendamos en este taller.</p>
<p>Además, es sorprendentemente rápido procesando los datos.</p>
<h2 id="caso-practico-generacion-de-una-piramide-de-teselas-vectoriales">Caso práctico: generación de una pirámide de teselas vectoriales</h2>
<ol>
<li>
<p>Instalar <a href="https://github.com/mapbox/tippecanoe">mapbox/tippecanoe</a>. Esto es muy sencillo en un Mac con brew, algo
    menos sencillo en Ubuntu (hay que asegurarse de tener todas las dependencias y compilar), y no está definido cómo
    compilarlo en Windows.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>También se puede usar alguna de las <a href="https://hub.docker.com/search/?isAutomated=0&amp;isOfficial=0&amp;page=1&amp;pullCount=0&amp;q=tippecanoe&amp;starCount=0">imágenes docker</a> disponibles.</p>
</div>
</li>
<li>
<p>A partir del fichero <code>buildings.geojson</code> en:</p>
<p><a href="https://github.com/geomatico/taller-vt-jiide/tree/master/ejercicios/02">https://github.com/geomatico/taller-vt-jiide/tree/master/ejercicios/02</a></p>
<p>Ejecutar el comando de tippecanoe:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>tippecanoe -L buildingpart:buildingpart.geojson -Z 12 -z 16 -n &quot;Catastro Building Parts&quot; -o buildingpart.mbtiles -A &quot;Catastro&quot;
</pre></div>
</td></tr></table>

<p>Esto generará el fichero <code>buildings.mbtiles</code>.</p>
</li>
<li>
<p>Abrir el fichero resultante con un administrador de bases de datos SQLite, y se podrá observar la estructura de datos mencionada.</p>
</li>
<li>
<p>QGIS tiene un plugin llamado "Vector Tiles Reader" para poder visualizar los datos. No es muy rápido ni estable, pero
puede servir para inspeccionar los datos.</p>
</li>
</ol>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../01_que_son/" title="1. Qué son" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                1. Qué son
              </span>
            </div>
          </a>
        
        
          <a href="../03_servirlas/" title="3. Cómo servirlas" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                3. Cómo servirlas
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.583bbe55.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>