



<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Trabajando con VT</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#trabajando-con-teselas-vectoriales" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="." title="Trabajando con VT" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Trabajando con VT
              </span>
              <span class="md-header-nav__topic">
                Home
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/geoinquiets/taller-vt/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="." title="Trabajando con VT" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Trabajando con VT
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/geoinquiets/taller-vt/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="." title="Home" class="md-nav__link md-nav__link--active">
      Home
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="1_teoria/" title="1. Qué son" class="md-nav__link">
      1. Qué son
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="2_visor_simple/" title="2. Cómo visualizarlas" class="md-nav__link">
      2. Cómo visualizarlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="3_tileserver_gl/" title="3. Cómo servirlas" class="md-nav__link">
      3. Cómo servirlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="4_tippecanoe/" title="4. Cómo crearlas" class="md-nav__link">
      4. Cómo crearlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="5_sprites_glyphs/" title="5. Sprites y Glyphs" class="md-nav__link">
      5. Sprites y Glyphs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="6_estilos/" title="6. Cómo simbolizarlas" class="md-nav__link">
      6. Cómo simbolizarlas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="7_servidor_dinamico/" title="7. Cómo servir datos dinámicos" class="md-nav__link">
      7. Cómo servir datos dinámicos
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/geoinquiets/taller-vt/edit/master/docs/index.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="trabajando-con-teselas-vectoriales">Trabajando con teselas vectoriales</h1>
<p>Bienvenidos al taller de teselas vectoriales. Este manual está publicado aquí:</p>
<h1 id="httpsgeoinquietsgithubiotaller-vt"><a href="https://geoinquiets.github.io/taller-vt/">https://geoinquiets.github.io/taller-vt/</a></h1>
<h2 id="autores">Autores</h2>
<ul>
<li>Wladimir Szczerban (alias Bolo) <em>@bolosig</em>, <a href="http://betaportal.icgc.cat">geostarter</a> (ICGC)</li>
<li>Oscar Fonts <em>@oscarfonts</em>, desarrollador freelance en <a href="http://geomati.co">geomati.co</a></li>
</ul>
<p>Y ambos somos <a href="http://geoinquiets.cat">geoinquiets</a>!</p>
<div class="admonition note">
<p class="admonition-title">Condiciones de reutilización de estos apuntes</p>
<p>Estos materiales están publicados bajo licencia
<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">CreativeCommons (by-sa) 4.0 internacional</a></p>
<p>Usted es libre de:
<em> Compartir — copiar y redistribuir el material en cualquier medio o formato
</em> Adaptar — remezclar, transformar y crear a partir del material para cualquier finalidad, incluso comercial.</p>
<p>Bajo las condiciones siguientes:
<em> Reconocimiento — Debe reconocer adecuadamente la autoría, proporcionar un enlace a la licencia e indicar si se han realizado cambios. Puede hacerlo de cualquier manera razonable, pero no de una manera que sugiera que tiene el apoyo del licenciador o lo recibe por el uso que hace.
</em> CompartirIgual — Si remezcla, transforma o crea a partir del material, deberá difundir sus contribuciones bajo la misma licencia que el original.
* No hay restricciones adicionales — No puede aplicar términos legales o medidas tecnológicas que legalmente restrinjan realizar aquello que la licencia permite.</p>
</div>
<h2 id="esenciales-para-moverse-por-osgeo-live">Esenciales para moverse por OSGeo Live</h2>
<ul>
<li>Usuario: "user"</li>
<li>Password: "user"</li>
<li>Para lanzar un programa de forma rápida: Menú inicio =&gt; Ejecutar</li>
<li><code>Shift + Ctrl + V</code> para pegar un texto del portapapeles en el terminal</li>
</ul>
<h2 id="descarga-de-los-materiales-para-el-taller">Descarga de los materiales para el taller</h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">cd</span> Desktop
wget https://geoinquiets.github.io/taller-vt/downloads/taller-vt.zip
unzip taller-vt.zip
<span class="nb">cd</span> taller-vt
ll
</pre></div>
</td></tr></table>

<p>Así pues, la ruta <code>~/Desktop/taller-vt</code> será nuestro directorio base, donde iremos creando los recursos necesarios.
De momento tenemos los subdirectorios:</p>
<ul>
<li><code>datos</code></li>
<li><code>maputnik</code></li>
</ul>
<h2 id="comprobacion-del-software-preinstalado">Comprobación del software preinstalado</h2>
<p>En el aula de la práctica se ha preinstalado una serie de software necesario para el taller.
En caso de que falte alguno, se pueden consultar las instrucciones de instalación en el siguiente apartado.</p>
<p>Comandos de comprobación: </p>
<ul>
<li><code>Alt + F2</code> =&gt; "terminator" debería abrir un terminal.</li>
<li><code>google-chrome http://tileserver.fonts.cat/styles/dark-matter/style.json</code> debería abrir Chrome y mostrar un JSON formateado y coloreado.</li>
<li><code>google-chrome http://tileserver.fonts.cat/styles/dark-matter-3d/?vector#16.09/41.3861/2.19226/-47.2/60</code> debería mostrar un mapa de Barcelona con edificios en 3D, y moverse con soltura.</li>
<li><code>node -v</code> Debería ser 6.x.x (NO mayor que 6, si aparece 8.x.x o 10.x.x, hay que cambiar de versión)</li>
<li><code>npm -v</code></li>
<li><code>code -v</code></li>
<li><code>tippecanoe -v</code></li>
</ul>
<h2 id="instalacion-de-requisitos-de-software">Instalación de requisitos de software</h2>
<p>El software de base para el taller ya está instalado en los ordenadores del aula, pero indicamos aquí cómo instalarlo
tomando como base OSGeo Live 11 (también valdrá para Ubuntu 16.04, en el que además debería instalarse PostGIS).</p>
<ol>
<li><a href="https://www.google.com/chrome/">Google Chrome</a></li>
<li>La extensión <a href="https://chrome.google.com/webstore/detail/json-viewer/gbmdgpbipfallnflgajpaliibnhdgobh">json-viewer</a> en Chrome</li>
<li><a href="https://code.visualstudio.com/docs/setup/linux#_debian-and-ubuntu-based-distributions">Microsoft Visual Studio Code</a></li>
<li>Terminator:
    <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo apt install terminator
</pre></div>
</td></tr></table></li>
<li>
<p>node6 y npm (sobre nvm):</p>
<p>Primero, instalar nvm:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh <span class="p">|</span> bash
</pre></div>
</td></tr></table>

<p>Cerrar y reabrir el terminal.
Luego, instalar node 6 y npm:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  nvm install 6
  npm install -g npm
  # comprobar versiones
  node -v # Debería ser 6.x.x
  npm -v # Debería ser 6.x.x o mayor
</pre></div>
</td></tr></table>

</li>
<li>
<p>tippecanoe:</p>
<p>Instalar dependencias (librerías sqlite3 y zlib):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>sudo apt install build-essential libsqlite3-dev zlib1g-dev
</pre></div>
</td></tr></table>

<p>Bajarse el código fuente:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>git clone https://github.com/mapbox/tippecanoe.git
<span class="nb">cd</span> tippecanoe
</pre></div>
</td></tr></table>

<p>Compilar:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>make -j
sudo make install
</pre></div>
</td></tr></table>

<p>Comprobar la instalación:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>tippecanoe -v <span class="c1"># Devolverá, por ejemplo, v1.29.0</span>
</pre></div>
</td></tr></table>

<p>Una vez instalado el ejecutable, podemos borrar el código fuente:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">cd</span> ..
rm -rf tippecanoe
</pre></div>
</td></tr></table>

</li>
</ol>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Todo el taller se basa en tener un navegador con capacidades WebGL, que debería
 poder moverse RÁPIDO.</p>
<ol>
<li>Comprobar que al abrirse esta página, se ve un mapa de Barcelona con edificios:
<a href="http://tileserver.fonts.cat/styles/dark-matter-3d/?vector#16.09/41.3861/2.19226/-47.2/60">http://tileserver.fonts.cat/styles/dark-matter-3d/?vector#16.09/41.3861/2.19226/-47.2/60</a></li>
<li>Comprobar que el mapa se mueve con soltura.</li>
<li>Si no se puede correr el SO nativo (sería lo ideal), ajustar la configuración
de VirtualBox para tener activadas las opciones:<ul>
<li>System &gt; Processor &gt; "Enable PAE/NX"</li>
<li>Display &gt; Screen &gt; Aumentar MB disponibles para la tarjeta gráfica.</li>
<li>Display &gt; Screen &gt; "Enable 3D acceleration".</li>
<li>Tener instaladas las "VirtualBox Guest Additions" en la máquina virtual.</li>
</ul>
</li>
</ol>
</div>
<h2 id="recursos-adicionales">Recursos adicionales</h2>
<p>Mayormente de <a href="https://twitter.com/fakeraf">Raf</a>, nuestra fuente diaria de vitaminas, vía <a href="https://twitter.com/geoinquiets">Geoinquiets</a>. </p>
<ul>
<li><a href="https://github.com/mapbox/awesome-vector-tiles">Awesome Vector Tiles</a> </li>
<li><a href="https://github.com/lukasmartinelli/naturalearthtiles">Natural Earth Vector Tiles by Lukas Martinelli</a></li>
<li><a href="https://geovation.github.io/build-your-own-static-vector-tile-pipeline">Tutorial de los Geoinquietos de Londres</a></li>
<li><a href="https://github.com/systemed/tilemaker">Tilemaker, de OSM a mbtiles de una tacada</a></li>
<li><a href="https://mappinggis.com/2017/09/que-son-los-vector-tiles-y-como-generarlos-con-geoserver/">Qué son las teselas vectoriales (vector tiles) y cómo generarlos con PostGIS / GeoServer</a></li>
<li><a href="http://www.gretchenpeterson.com/blog/archives/4901">Natural Earth Quickstart Style implemented with Tegola</a></li>
<li><a href="http://docs.geoserver.org/stable/en/user/styling/mbstyle/cookbook/index.html">GeoServer MBStyle Cookbook</a></li>
<li><a href="http://docs.geoserver.org/stable/en/user/styling/workshop/mbstyle/index.html">GeoServer MBStyle Styling Workbook</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="1_teoria/" title="1. Qué son" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                1. Qué son
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.583bbe55.js"></script>
      
        
        
          
          <script src="assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
    
      
    
  </body>
</html>